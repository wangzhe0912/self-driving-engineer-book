## 曲率计算

到目前为止，我们已经有一个阈值图像，并估计了哪些像素属于左车道线和右车道线。同时，我们也已经为这些像素位置拟合了一个多项式。接下来我们将计算拟合曲线的曲率半径。

![](/assets/88.jpg)

在之前的练习中，我们已经拟合出如下所示的车道线表达式：

$$
f(y) = Ay^2 + By + C
$$

我们选择拟合f(y)而不是f(x)的原因是车道线往往趋近于垂直，且多个y值可能具有相同的x值。

## 曲率半径

对于一个$$x=f(y)$$的函数而言，曲率半径R的计算公式如下：

$$
R_{curve} = \frac{(1 + (2Ay + B)^2)^{\frac{3}{2}}}{\left|2A\right|}
$$

在道路图像中，图像越上方，对应y的值越小；图像越下方，对应y的值越大。因此，如果我们希望计算当前车辆位置的曲率半径，则此时应该取y值为`image.shape[1]`。

当我们得到像素点级别的曲率半径后，需要将其转换为对应于真实世界的度量单位（如米）。假设我们得到的表达式为$$f(y) = Ay^2 + By + C$$，mx和my分别表示在x轴和y轴上，每个像素对应多少米，则该表达式可以由像素级别转换为米级别：

$$
x = mx / (my ** 2) * Ay^2 + By + C
$$

















