# 1.1 计算机基础

为了让车辆能够自主的行驶，我们首先需要让车辆能够正常感知到车辆周围的环境信息。
在我们人类驾驶的过程中，我们是通过眼睛来观察车道线的位置，从而判断在哪里转弯，如何正常行驶等。而在自动驾驶的汽车中，我们需要使用摄像头和一些其他类型的传感器来实现类似的功能。我们将要解决的第一个问题就是如何去识别车道线。


下图是一个车载摄像头拍摄到的图片，观察这个图片，你觉得哪些特征可以帮助我们来定位车道线呢？
![前置摄像头](/assets/2.jpg)

事实上，我们可以从以下四个方面来帮助我们定位车道线：

1. 颜色
2. 形状
3. 方向
4. 位置











## 计算机视觉
既然我们已经提到了计算机视觉，那么计算机视觉究竟是什么呢？
计算机视觉实际就是通过利用各种算法，使得计算机能够向我们人类一样看到一个有颜色、形状的世界。计算机视觉是一个很大的领域，在本书中，我们仅讨论其中几个方面。关于计算机视觉更多的知识，可以查看相关的书籍。

在本书中，我们将使用python和**opencv**进行计算机视觉相关的工作。**opencv**的全称是Open-Source Computer Vision。它包含了大量可以使用的函数库。OpenCV库本身提供了完整详细的文档，更多内容可以查阅相关的[文档](http://opencv.org/)。

## Canny边缘检测
Canny边缘检测算法是John F.Canny于1986年开发出来的一个边缘检测算法。边缘检测的目的是只是图像中物体的边界。

Canny边缘检测的基本原理就是通过计算图像中各个像素点的梯度，并将梯度值作为像素值，从而有助于发现图像的边缘，以及进一步更容易根据形状检测对象。

接下来，我们首先看一下openCV中Canny边缘检测函数的输入参数：

```
edges = cv2.Canny(gray, low_threshold, high_threshold)
```
在这个函数中，我们将Canny算法用于gray的灰度图像中，并将处理后的图像输出给一个edges变量。上、下阈值决定了边缘被检测得到所需要满足的强度。其中，强度的定义时图像中相邻像素之间的差异程度（这就是所说的梯度）。

接下来，我们通过一个例子来演示一下Canny边缘检测的功能。
下图是一个灰度图像，其中图像中有明亮的部分、暗淡的部分以及亮度快速变化的部分。
![灰度图像](/assets/8.jpg)

整个图像可以看作是一个在二维坐标系下的关于x和y的数学函数：
![二元函数](/assets/9.jpg)
因此，我们可以对这个图像进行一些数学运算。

例如，我们可以对每个像素点的值进行求导：

$$
\frac{df}{dx} = \Delta(pixel\_value)
$$

当导数值越大时，说明图像中在该像素点的颜色变换越明显，反之则说明变化越不明显。由于图像是二维的，因此，我们在计算导数时可以同时计算关于x和y的导数。对于计算导数后得到的图像，我们称之为**梯度图像**。

通过基本的梯度计算，我们可以得到较厚的边缘线。而Canny算法可以帮助我们把边缘线变得更细。此外，我们还可以在调用Canny算法时，选择更小的下限阈值，有助于连接这些较强的边缘。

Ps：在图像处理中，图像的左上角是坐标原点(0,0)。y值向下增加，x值向右增加。



